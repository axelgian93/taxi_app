(()=>{var e={};e.id=963,e.ids=[963],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8581:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>d});var r=n(3191),a=n(8716),i=n(7922),s=n.n(i),l=n(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);n.d(t,c);let d=["",{children:["admin",{children:["tariffs",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,1882)),"/app/src/app/admin/tariffs/new/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,2029)),"/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/app/src/app/admin/tariffs/new/page.tsx"],u="/admin/tariffs/new/page",h={require:n,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/tariffs/new/page",pathname:"/admin/tariffs/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9189:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},4047:(e,t,n)=>{Promise.resolve().then(n.bind(n,933)),Promise.resolve().then(n.bind(n,6618)),Promise.resolve().then(n.bind(n,8482))},2402:(e,t,n)=>{Promise.resolve().then(n.bind(n,7583))},7583:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(326),a=n(7577),i=n(434),s=n(8069),l=n(6208);function c(){let[e,t]=(0,a.useState)({city:"",active:!0,baseFareUsd:1.5,perKmUsd:.5,perMinUsd:.15,minFareUsd:2,nightMultiplier:1,weekendMultiplier:1,surgeMultiplier:1,nightStartHour:"",nightEndHour:"",cancellationGraceSec:120,cancellationFeeAcceptedUsd:1,cancellationFeeArrivedUsd:2,notes:"",deactivateOld:!0}),[n,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null);async function p(t){t.preventDefault(),h(null);let n=(0,l.PR)();if(!n||"ADMIN"!==n.role){location.href="/login";return}let r=(0,l.oC)();if(!r){location.href="/login";return}c(!0);try{let t={city:e.city.trim(),active:!!e.active,baseFareUsd:Number(e.baseFareUsd),perKmUsd:Number(e.perKmUsd),perMinUsd:Number(e.perMinUsd),minFareUsd:Number(e.minFareUsd||0),nightMultiplier:Number(e.nightMultiplier||1),weekendMultiplier:Number(e.weekendMultiplier||1),surgeMultiplier:Number(e.surgeMultiplier||1),nightStartHour:""===e.nightStartHour?null:Number(e.nightStartHour),nightEndHour:""===e.nightEndHour?null:Number(e.nightEndHour),cancellationGraceSec:""===e.cancellationGraceSec?null:Number(e.cancellationGraceSec),cancellationFeeAcceptedUsd:""===e.cancellationFeeAcceptedUsd?null:Number(e.cancellationFeeAcceptedUsd),cancellationFeeArrivedUsd:""===e.cancellationFeeArrivedUsd?null:Number(e.cancellationFeeArrivedUsd),notes:e.notes?.trim()||null,deactivateOld:!!e.deactivateOld};await (0,s.j)("/admin/tariffs",{method:"POST",body:JSON.stringify(t)},r),location.href="/admin/tariffs"}catch(e){h(e?.message||"Error al crear")}finally{c(!1)}}return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Nueva Tarifa"}),r.jsx(i.default,{className:"btn secondary",href:"/admin/tariffs",children:"Volver"})]}),(0,r.jsxs)("form",{onSubmit:p,className:"card",style:{display:"grid",gap:12,maxWidth:820},children:[(0,r.jsxs)(d,{children:[r.jsx(o,{label:"Ciudad",children:r.jsx("input",{value:e.city,onChange:n=>t({...e,city:n.target.value}),required:!0})}),r.jsx(o,{label:"Activa",children:r.jsx("input",{type:"checkbox",checked:e.active,onChange:n=>t({...e,active:n.target.checked})})})]}),(0,r.jsxs)(d,{children:[r.jsx(o,{label:"Base $",children:r.jsx("input",{type:"number",step:"0.01",value:e.baseFareUsd,onChange:n=>t({...e,baseFareUsd:n.target.value}),required:!0})}),r.jsx(o,{label:"$ por km",children:r.jsx("input",{type:"number",step:"0.01",value:e.perKmUsd,onChange:n=>t({...e,perKmUsd:n.target.value}),required:!0})}),r.jsx(o,{label:"$ por min",children:r.jsx("input",{type:"number",step:"0.01",value:e.perMinUsd,onChange:n=>t({...e,perMinUsd:n.target.value}),required:!0})}),r.jsx(o,{label:"M\xednimo $",children:r.jsx("input",{type:"number",step:"0.01",value:e.minFareUsd,onChange:n=>t({...e,minFareUsd:n.target.value})})})]}),(0,r.jsxs)(d,{children:[r.jsx(o,{label:"Mult. noche",children:r.jsx("input",{type:"number",step:"0.01",value:e.nightMultiplier,onChange:n=>t({...e,nightMultiplier:n.target.value})})}),r.jsx(o,{label:"Mult. fin de semana",children:r.jsx("input",{type:"number",step:"0.01",value:e.weekendMultiplier,onChange:n=>t({...e,weekendMultiplier:n.target.value})})}),r.jsx(o,{label:"Surge",children:r.jsx("input",{type:"number",step:"0.01",value:e.surgeMultiplier,onChange:n=>t({...e,surgeMultiplier:n.target.value})})})]}),(0,r.jsxs)(d,{children:[r.jsx(o,{label:"Hora inicio noche",children:r.jsx("input",{type:"number",min:"0",max:"23",value:e.nightStartHour,onChange:n=>t({...e,nightStartHour:n.target.value})})}),r.jsx(o,{label:"Hora fin noche",children:r.jsx("input",{type:"number",min:"0",max:"23",value:e.nightEndHour,onChange:n=>t({...e,nightEndHour:n.target.value})})}),r.jsx(o,{label:"Gracia cancelaci\xf3n (s)",children:r.jsx("input",{type:"number",min:"0",value:e.cancellationGraceSec,onChange:n=>t({...e,cancellationGraceSec:n.target.value})})})]}),(0,r.jsxs)(d,{children:[r.jsx(o,{label:"Fee cancelaci\xf3n ACCEPTED $",children:r.jsx("input",{type:"number",step:"0.01",value:e.cancellationFeeAcceptedUsd,onChange:n=>t({...e,cancellationFeeAcceptedUsd:n.target.value})})}),r.jsx(o,{label:"Fee cancelaci\xf3n ARRIVED $",children:r.jsx("input",{type:"number",step:"0.01",value:e.cancellationFeeArrivedUsd,onChange:n=>t({...e,cancellationFeeArrivedUsd:n.target.value})})}),r.jsx(o,{label:"Desactivar previas",children:r.jsx("input",{type:"checkbox",checked:e.deactivateOld,onChange:n=>t({...e,deactivateOld:n.target.checked})})})]}),r.jsx(o,{label:"Notas",children:r.jsx("input",{value:e.notes,onChange:n=>t({...e,notes:n.target.value})})}),u&&r.jsx("div",{style:{color:"var(--danger)"},children:u}),r.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:r.jsx("button",{className:"btn",disabled:n,children:n?"Guardandoâ€¦":"Crear"})})]})]})}function d({children:e}){return r.jsx("div",{className:"row",style:{gap:16,flexWrap:"wrap"},children:e})}function o({label:e,children:t}){return(0,r.jsxs)("label",{style:{display:"grid"},children:[r.jsx("div",{className:"muted",children:e}),t]})}},8482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(326),a=n(7577),i=n.n(a),s=n(434),l=n(6208);let c="http://localhost:8081";function d(){let[e,t]=(0,a.useState)(()=>!1),[n,i]=(0,a.useState)(!1),[s,d]=(0,a.useState)(null);async function o(){i(!0),d(null);try{let e=(0,l.oC)();if(!e)throw Error("Inicia sesi\xf3n");let t=await fetch(`${c}/admin/demo/seed`,{method:"POST",headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(!t.ok)throw Error(`Seed HTTP ${t.status}`);d("Demo iniciada")}catch(e){d(e?.message||"Error en seed")}finally{i(!1)}}async function u(){i(!0),d(null);try{let e=(0,l.oC)();if(!e)throw Error("Inicia sesi\xf3n");let t=await fetch(`${c}/admin/demo/reset`,{method:"POST",headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(!t.ok)throw Error(`Reset HTTP ${t.status}`);d("Demo reseteada")}catch(e){d(e?.message||"Error en reset")}finally{i(!1)}}async function h(){let n=!e;t(n),n?await o():await u()}return(0,r.jsxs)("div",{style:{background:e?"#0b4":"#444",color:"white",padding:"6px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{className:"row",style:{gap:12,alignItems:"center"},children:[r.jsx("strong",{children:"Modo Demo"}),r.jsx("span",{className:"muted",children:e?"activo":"inactivo"}),s&&r.jsx("span",{style:{opacity:.8},children:s})]}),(0,r.jsxs)("div",{className:"row",style:{gap:8},children:[r.jsx("button",{className:"btn secondary",onClick:h,disabled:n,children:e?"Detener":"Iniciar"}),e&&r.jsx("button",{className:"btn secondary",onClick:u,disabled:n,children:"Reset ahora"})]})]})}function o(){let[e,t]=(0,a.useState)(""),[n,i]=(0,a.useState)("");if(!e)return null;let s=n?` ${n.toLowerCase()}`:"";return(0,r.jsxs)("span",{className:"muted",style:{marginLeft:12},children:["v",e,s?` (${s})`:""]})}var u=n(8145);function h({children:e}){return(0,r.jsxs)(r.Fragment,{children:[r.jsx(d,{}),(0,r.jsxs)("header",{className:"container",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{className:"row",children:[r.jsx("strong",{children:"Taxi App"}),(0,r.jsxs)("nav",{className:"row",style:{gap:16},children:[r.jsx(s.default,{href:"/",children:"Inicio"}),r.jsx(s.default,{href:"/admin/trips",children:"Trips"}),r.jsx(s.default,{href:"/admin/tariffs",children:"Tarifas"}),r.jsx(s.default,{href:"/admin/simulator",children:"Simulador"}),r.jsx(s.default,{href:"/admin/reports",children:"Reportes"}),r.jsx(s.default,{href:"/admin/ops",children:"Operaciones"})]})]}),r.jsx(p,{})]}),r.jsx(u.V,{children:r.jsx("main",{className:"container",children:e})}),(0,r.jsxs)("footer",{className:"container",style:{marginTop:24,paddingBottom:24,display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[r.jsx(s.default,{href:"/admin/readme",children:"Gu\xeda de Demo"}),r.jsx(o,{})]})]})}function p(){let[e,t]=i().useState(()=>(0,l.PR)());return e?(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("span",{className:"muted",children:[e.email," (",e.role,")"]}),r.jsx("button",{className:"btn secondary",onClick:()=>{(0,l.DH)(),location.href="/login"},children:"Salir"})]}):r.jsx(s.default,{className:"btn secondary",href:"/login",children:"Ingresar"})}},8145:(e,t,n)=>{"use strict";n.d(t,{V:()=>l,p:()=>s});var r=n(326),a=n(7577);let i=(0,a.createContext)(null);function s(){let e=(0,a.useContext)(i);if(!e)throw Error("useToast must be used within ToastProvider");return e}function l({children:e}){let[t,n]=(0,a.useState)([]),s=(e,t="info",r=3200)=>{let a=Date.now()+Math.floor(1e3*Math.random()),i={id:a,kind:t,text:e,ttl:Date.now()+r};n(e=>[...e,i]),setTimeout(()=>n(e=>e.filter(e=>e.id!==a)),r)},l=(0,a.useMemo)(()=>({show:s}),[]);return(0,r.jsxs)(i.Provider,{value:l,children:[e,r.jsx("div",{style:{position:"fixed",top:12,right:12,display:"flex",flexDirection:"column",gap:8,zIndex:1e3},children:t.map(e=>(0,r.jsxs)("div",{className:"card",style:{padding:"10px 12px",minWidth:260,maxWidth:360,borderLeft:`4px solid ${"success"===e.kind?"#22c55e":"error"===e.kind?"#ef4444":"#3b82f6"}`},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:2},children:"success"===e.kind?"\xc9xito":"error"===e.kind?"Error":"Info"}),r.jsx("div",{className:"muted",children:e.text})]},e.id))})]})}},8069:(e,t,n)=>{"use strict";n.d(t,{S:()=>r,j:()=>a});let r="http://localhost:8081";async function a(e,t={},n){let a=new Headers(t.headers||{});a.set("Content-Type","application/json"),n&&a.set("Authorization",`Bearer ${n}`);let i=await fetch(`${r}${e}`,{...t,headers:a,cache:"no-store"});if(!i.ok){let e=await i.text().catch(()=>"");throw Error(`API ${i.status}: ${e||i.statusText}`)}return i.json()}},6208:(e,t,n)=>{"use strict";function r(e,t){}function a(){return null}function i(){}function s(){return null}n.d(t,{DH:()=>i,J1:()=>r,PR:()=>a,oC:()=>s})},1882:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(8570).createProxy)(String.raw`/app/src/app/admin/tariffs/new/page.tsx#default`)},2029:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(9510);n(4315),n(1159);let a=(0,n(5782).default)(()=>n.e(298).then(n.bind(n,7298)),{loadableGenerated:{modules:["app/layout.tsx -> @/src/components/ClientShell"]},ssr:!1});function i({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{children:r.jsx(a,{children:e})})})}},4315:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[555],()=>n(8581));module.exports=r})();