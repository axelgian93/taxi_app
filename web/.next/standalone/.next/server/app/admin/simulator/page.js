(()=>{var e={};e.id=51,e.ids=[51],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3956:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o});var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["admin",{children:["simulator",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4175)),"/app/src/app/admin/simulator/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/src/app/admin/simulator/page.tsx"],u="/admin/simulator/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/simulator/page",pathname:"/admin/simulator",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9189:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4047:(e,t,s)=>{Promise.resolve().then(s.bind(s,933)),Promise.resolve().then(s.bind(s,6618)),Promise.resolve().then(s.bind(s,8482))},5746:(e,t,s)=>{Promise.resolve().then(s.bind(s,6809))},6809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(326),a=s(7577);function n(){let[e,t]=(0,a.useState)("Guayaquil"),[s,n]=(0,a.useState)(5),[i,l]=(0,a.useState)(15),[d,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(1),[p,x]=(0,a.useState)([]),[f,j]=(0,a.useState)(""),[g,b]=(0,a.useState)(null),v=(0,a.useMemo)(()=>p.find(e=>e.id===f)||null,[p,f]),y=(0,a.useMemo)(()=>{if(!v)return null;let e=Number(v.baseFareUsd||0),t=e+Number(v.perKmUsd||0)*Number(s||0)+Number(v.perMinUsd||0)*Number(i||0),r=(d?Number(v.nightMultiplier||1):1)*(c?Number(v.weekendMultiplier||1):1)*Number(m||1),a=t*r,n=Number(v.minFareUsd||0);return{base:e,beforeMin:a,minFare:n,total:Math.max(n,a),mult:r}},[v,s,i,d,c,m]);return(0,r.jsxs)("div",{children:[r.jsx("h2",{children:"Simulador de Tarifa"}),(0,r.jsxs)("div",{className:"card",style:{display:"grid",gap:12,maxWidth:820},children:[(0,r.jsxs)("div",{className:"row",style:{gap:16,flexWrap:"wrap"},children:[(0,r.jsxs)("label",{children:[r.jsx("div",{className:"muted",children:"Ciudad"}),r.jsx("input",{value:e,onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("label",{children:[r.jsx("div",{className:"muted",children:"Regla"}),r.jsx("select",{value:f,onChange:e=>j(e.target.value),children:p.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.city," â€¢ base $",e.baseFareUsd,"/km $",e.perKmUsd,"/min $",e.perMinUsd]},e.id))})]})]}),(0,r.jsxs)("div",{className:"row",style:{gap:16,flexWrap:"wrap"},children:[(0,r.jsxs)("label",{children:[r.jsx("div",{className:"muted",children:"Distancia (km)"}),r.jsx("input",{type:"number",step:"0.1",value:s,onChange:e=>n(Number(e.target.value))})]}),(0,r.jsxs)("label",{children:[r.jsx("div",{className:"muted",children:"Duraci\xf3n (min)"}),r.jsx("input",{type:"number",step:"1",value:i,onChange:e=>l(Number(e.target.value))})]}),(0,r.jsxs)("label",{className:"row",style:{gap:8},children:[r.jsx("input",{type:"checkbox",checked:d,onChange:e=>o(e.target.checked)})," Noche"]}),(0,r.jsxs)("label",{className:"row",style:{gap:8},children:[r.jsx("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked)})," Fin de semana"]}),(0,r.jsxs)("label",{children:[r.jsx("div",{className:"muted",children:"Surge"}),r.jsx("input",{type:"number",step:"0.1",value:m,onChange:e=>h(Number(e.target.value))})]})]}),g&&r.jsx("div",{style:{color:"var(--danger)"},children:g}),y&&(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{children:["Total estimado: ",(0,r.jsxs)("strong",{children:["$",y.total.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"muted",children:["(base + km + min) \xd7 mult = $",y.beforeMin.toFixed(2),"; m\xednimo $",y.minFare.toFixed(2)]})]})]})]})}},8482:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(326),a=s(7577),n=s.n(a),i=s(434),l=s(6208);let d="http://localhost:8081";function o(){let[e,t]=(0,a.useState)(()=>!1),[s,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null);async function c(){n(!0),o(null);try{let e=(0,l.oC)();if(!e)throw Error("Inicia sesi\xf3n");let t=await fetch(`${d}/admin/demo/seed`,{method:"POST",headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(!t.ok)throw Error(`Seed HTTP ${t.status}`);o("Demo iniciada")}catch(e){o(e?.message||"Error en seed")}finally{n(!1)}}async function u(){n(!0),o(null);try{let e=(0,l.oC)();if(!e)throw Error("Inicia sesi\xf3n");let t=await fetch(`${d}/admin/demo/reset`,{method:"POST",headers:{Authorization:`Bearer ${e}`},cache:"no-store"});if(!t.ok)throw Error(`Reset HTTP ${t.status}`);o("Demo reseteada")}catch(e){o(e?.message||"Error en reset")}finally{n(!1)}}async function m(){let s=!e;t(s),s?await c():await u()}return(0,r.jsxs)("div",{style:{background:e?"#0b4":"#444",color:"white",padding:"6px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{className:"row",style:{gap:12,alignItems:"center"},children:[r.jsx("strong",{children:"Modo Demo"}),r.jsx("span",{className:"muted",children:e?"activo":"inactivo"}),i&&r.jsx("span",{style:{opacity:.8},children:i})]}),(0,r.jsxs)("div",{className:"row",style:{gap:8},children:[r.jsx("button",{className:"btn secondary",onClick:m,disabled:s,children:e?"Detener":"Iniciar"}),e&&r.jsx("button",{className:"btn secondary",onClick:u,disabled:s,children:"Reset ahora"})]})]})}function c(){let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)("");if(!e)return null;let i=s?` ${s.toLowerCase()}`:"";return(0,r.jsxs)("span",{className:"muted",style:{marginLeft:12},children:["v",e,i?` (${i})`:""]})}var u=s(8145);function m({children:e}){return(0,r.jsxs)(r.Fragment,{children:[r.jsx(o,{}),(0,r.jsxs)("header",{className:"container",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{className:"row",children:[r.jsx("strong",{children:"Taxi App"}),(0,r.jsxs)("nav",{className:"row",style:{gap:16},children:[r.jsx(i.default,{href:"/",children:"Inicio"}),r.jsx(i.default,{href:"/admin/trips",children:"Trips"}),r.jsx(i.default,{href:"/admin/tariffs",children:"Tarifas"}),r.jsx(i.default,{href:"/admin/simulator",children:"Simulador"}),r.jsx(i.default,{href:"/admin/reports",children:"Reportes"}),r.jsx(i.default,{href:"/admin/ops",children:"Operaciones"})]})]}),r.jsx(h,{})]}),r.jsx(u.V,{children:r.jsx("main",{className:"container",children:e})}),(0,r.jsxs)("footer",{className:"container",style:{marginTop:24,paddingBottom:24,display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[r.jsx(i.default,{href:"/admin/readme",children:"Gu\xeda de Demo"}),r.jsx(c,{})]})]})}function h(){let[e,t]=n().useState(()=>(0,l.PR)());return e?(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("span",{className:"muted",children:[e.email," (",e.role,")"]}),r.jsx("button",{className:"btn secondary",onClick:()=>{(0,l.DH)(),location.href="/login"},children:"Salir"})]}):r.jsx(i.default,{className:"btn secondary",href:"/login",children:"Ingresar"})}},8145:(e,t,s)=>{"use strict";s.d(t,{V:()=>l,p:()=>i});var r=s(326),a=s(7577);let n=(0,a.createContext)(null);function i(){let e=(0,a.useContext)(n);if(!e)throw Error("useToast must be used within ToastProvider");return e}function l({children:e}){let[t,s]=(0,a.useState)([]),i=(e,t="info",r=3200)=>{let a=Date.now()+Math.floor(1e3*Math.random()),n={id:a,kind:t,text:e,ttl:Date.now()+r};s(e=>[...e,n]),setTimeout(()=>s(e=>e.filter(e=>e.id!==a)),r)},l=(0,a.useMemo)(()=>({show:i}),[]);return(0,r.jsxs)(n.Provider,{value:l,children:[e,r.jsx("div",{style:{position:"fixed",top:12,right:12,display:"flex",flexDirection:"column",gap:8,zIndex:1e3},children:t.map(e=>(0,r.jsxs)("div",{className:"card",style:{padding:"10px 12px",minWidth:260,maxWidth:360,borderLeft:`4px solid ${"success"===e.kind?"#22c55e":"error"===e.kind?"#ef4444":"#3b82f6"}`},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:2},children:"success"===e.kind?"\xc9xito":"error"===e.kind?"Error":"Info"}),r.jsx("div",{className:"muted",children:e.text})]},e.id))})]})}},6208:(e,t,s)=>{"use strict";function r(e,t){}function a(){return null}function n(){}function i(){return null}s.d(t,{DH:()=>n,J1:()=>r,PR:()=>a,oC:()=>i})},4175:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/app/src/app/admin/simulator/page.tsx#default`)},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(9510);s(4315),s(1159);let a=(0,s(5782).default)(()=>s.e(298).then(s.bind(s,7298)),{loadableGenerated:{modules:["app/layout.tsx -> @/src/components/ClientShell"]},ssr:!1});function n({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{children:r.jsx(a,{children:e})})})}},4315:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[555],()=>s(3956));module.exports=r})();