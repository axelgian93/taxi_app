(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7788:function(t,e,n){Promise.resolve().then(n.bind(n,1193))},1193:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return i}});var r=n(7437),a=n(2265),l=n(2800),o=n(4282);function i(){let[t,e]=(0,a.useState)("admin@taxi.local"),[n,i]=(0,a.useState)("123456"),[s,u]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null);async function h(e){e.preventDefault(),d(null),u(!0);try{let e=await (0,l.j)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:n})});(0,o.J1)(e.token,e.user);let r=e.user.role;"ADMIN"===r?location.href="/admin/trips":"DRIVER"===r?location.href="/driver":location.href="/rider/trips"}catch(t){d((null==t?void 0:t.message)||"Error al iniciar sesi\xf3n")}finally{u(!1)}}return(0,r.jsxs)("div",{className:"card",style:{maxWidth:420,margin:"40px auto"},children:[(0,r.jsx)("h2",{children:"Ingresar"}),(0,r.jsx)("p",{className:"muted",children:"Usa un usuario ADMIN para ver el panel."}),(0,r.jsxs)("form",{onSubmit:h,className:"row",style:{flexDirection:"column",alignItems:"stretch",gap:12},children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("div",{className:"muted",children:"Email"}),(0,r.jsx)("input",{value:t,onChange:t=>e(t.target.value),placeholder:"email",style:{width:"100%",padding:8,borderRadius:8}})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("div",{className:"muted",children:"Password"}),(0,r.jsx)("input",{value:n,onChange:t=>i(t.target.value),type:"password",placeholder:"password",style:{width:"100%",padding:8,borderRadius:8}})]}),c&&(0,r.jsx)("div",{style:{color:"var(--danger)"},children:c}),(0,r.jsx)("button",{className:"btn",disabled:s,children:s?"Ingresandoâ€¦":"Ingresar"})]})]})}},2800:function(t,e,n){"use strict";n.d(e,{S:function(){return r},j:function(){return a}});let r="http://localhost:8081";async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=new Headers(e.headers||{});a.set("Content-Type","application/json"),n&&a.set("Authorization","Bearer ".concat(n));let l=await fetch("".concat(r).concat(t),{...e,headers:a,cache:"no-store"});if(!l.ok){let t=await l.text().catch(()=>"");throw Error("API ".concat(l.status,": ").concat(t||l.statusText))}return l.json()}},4282:function(t,e,n){"use strict";n.d(e,{DH:function(){return s},J1:function(){return o},PR:function(){return i},oC:function(){return u}});var r=n(6300).Buffer;let a="taxi_token",l="taxi_user";function o(t,e){localStorage.setItem(a,t),localStorage.setItem(l,JSON.stringify(e))}function i(){let t=localStorage.getItem(l);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}function s(){localStorage.removeItem(a),localStorage.removeItem(l)}function u(){let t=localStorage.getItem(a);return t?!function(t){let e=function(t){let e=t.split(".");if(3!==e.length)return null;try{let t=function(t){try{let e=t.length%4==2?"==":t.length%4==3?"=":t.length%4==1?"===":"",n=t.replace(/-/g,"+").replace(/_/g,"/")+e;if("function"==typeof atob)return atob(n);return r.from(n,"base64").toString("binary")}catch(t){return""}}(e[1]);return JSON.parse(t)}catch(t){return null}}(t);return null!=e&&!!e.exp&&Math.floor(Date.now()/1e3)>=e.exp}(t)?t:(s(),null):null}}},function(t){t.O(0,[300,971,23,744],function(){return t(t.s=7788)}),_N_E=t.O()}]);