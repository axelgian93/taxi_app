(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1117:function(e,t,n){Promise.resolve().then(n.bind(n,912)),Promise.resolve().then(n.bind(n,1481)),Promise.resolve().then(n.bind(n,2051)),Promise.resolve().then(n.bind(n,5204))},912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let r=n(5592);function i(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return n}},1481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let r=n(7437),i=n(8512);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,i.getExpectedRequestStore)("next/dynamic css"),a=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,r.jsx)(r.Fragment,{children:a.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},2051:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(7437),i=n(2265),a=n(7138),o=n(4282);let s="http://localhost:8081",l="demo_mode";function c(){let[e,t]=(0,i.useState)(()=>"1"===localStorage.getItem(l)),[n,a]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null);async function u(){a(!0),d(null);try{let e=(0,o.oC)();if(!e)throw Error("Inicia sesi\xf3n");let t=await fetch("".concat(s,"/admin/demo/seed"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},cache:"no-store"});if(!t.ok)throw Error("Seed HTTP ".concat(t.status));d("Demo iniciada")}catch(e){d((null==e?void 0:e.message)||"Error en seed")}finally{a(!1)}}async function f(){a(!0),d(null);try{let e=(0,o.oC)();if(!e)throw Error("Inicia sesi\xf3n");let t=await fetch("".concat(s,"/admin/demo/reset"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},cache:"no-store"});if(!t.ok)throw Error("Reset HTTP ".concat(t.status));d("Demo reseteada")}catch(e){d((null==e?void 0:e.message)||"Error en reset")}finally{a(!1)}}async function h(){let n=!e;t(n),localStorage.setItem(l,n?"1":"0"),n?await u():await f()}return(0,i.useEffect)(()=>{if(!e)return;let t=()=>{let e=(0,o.oC)();if(e)try{fetch("".concat(s,"/admin/demo/reset"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},keepalive:!0,cache:"no-store"}).catch(()=>{})}catch(e){}};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&t()}),()=>window.removeEventListener("beforeunload",t)},[e]),(0,r.jsxs)("div",{style:{background:e?"#0b4":"#444",color:"white",padding:"6px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{className:"row",style:{gap:12,alignItems:"center"},children:[(0,r.jsx)("strong",{children:"Modo Demo"}),(0,r.jsx)("span",{className:"muted",children:e?"activo":"inactivo"}),c&&(0,r.jsx)("span",{style:{opacity:.8},children:c})]}),(0,r.jsxs)("div",{className:"row",style:{gap:8},children:[(0,r.jsx)("button",{className:"btn secondary",onClick:h,disabled:n,children:e?"Detener":"Iniciar"}),e&&(0,r.jsx)("button",{className:"btn secondary",onClick:f,disabled:n,children:"Reset ahora"})]})]})}function d(){let[e,t]=(0,i.useState)(""),[n,a]=(0,i.useState)("");if((0,i.useEffect)(()=>{let e=!1;return(async()=>{try{let n=await fetch("".concat("http://localhost:8081","/healthz/extended"),{cache:"no-store"});if(!n.ok)return;let r=await n.json();e||(t((null==r?void 0:r.version)||""),a(((null==r?void 0:r.env)||"").toString()))}catch(e){}})(),()=>{e=!0}},[]),!e)return null;let o=n?" ".concat(n.toLowerCase()):"";return(0,r.jsxs)("span",{className:"muted",style:{marginLeft:12},children:["v",e,o?" (".concat(o,")"):""]})}var u=n(8873);function f(e){let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)("header",{className:"container",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("strong",{children:"Taxi App"}),(0,r.jsxs)("nav",{className:"row",style:{gap:16},children:[(0,r.jsx)(a.default,{href:"/",children:"Inicio"}),(0,r.jsx)(a.default,{href:"/admin/trips",children:"Trips"}),(0,r.jsx)(a.default,{href:"/admin/tariffs",children:"Tarifas"}),(0,r.jsx)(a.default,{href:"/admin/simulator",children:"Simulador"}),(0,r.jsx)(a.default,{href:"/admin/reports",children:"Reportes"}),(0,r.jsx)(a.default,{href:"/admin/ops",children:"Operaciones"})]})]}),(0,r.jsx)(h,{})]}),(0,r.jsx)(u.V,{children:(0,r.jsx)("main",{className:"container",children:t})}),(0,r.jsxs)("footer",{className:"container",style:{marginTop:24,paddingBottom:24,display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[(0,r.jsx)(a.default,{href:"/admin/readme",children:"Gu\xeda de Demo"}),(0,r.jsx)(d,{})]})]})}function h(){let[e,t]=i.useState(()=>(0,o.PR)());return(i.useEffect(()=>{let e=setInterval(()=>t((0,o.PR)()),1e3);return()=>clearInterval(e)},[]),e)?(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("span",{className:"muted",children:[e.email," (",e.role,")"]}),(0,r.jsx)("button",{className:"btn secondary",onClick:()=>{(0,o.DH)(),location.href="/login"},children:"Salir"})]}):(0,r.jsx)(a.default,{className:"btn secondary",href:"/login",children:"Ingresar"})}},8873:function(e,t,n){"use strict";n.d(t,{V:function(){return s},p:function(){return o}});var r=n(7437),i=n(2265);let a=(0,i.createContext)(null);function o(){let e=(0,i.useContext)(a);if(!e)throw Error("useToast must be used within ToastProvider");return e}function s(e){let{children:t}=e,[n,o]=(0,i.useState)([]),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3200,r=Date.now()+Math.floor(1e3*Math.random()),i={id:r,kind:t,text:e,ttl:Date.now()+n};o(e=>[...e,i]),setTimeout(()=>o(e=>e.filter(e=>e.id!==r)),n)},l=(0,i.useMemo)(()=>({show:s}),[]);return(0,r.jsxs)(a.Provider,{value:l,children:[t,(0,r.jsx)("div",{style:{position:"fixed",top:12,right:12,display:"flex",flexDirection:"column",gap:8,zIndex:1e3},children:n.map(e=>(0,r.jsxs)("div",{className:"card",style:{padding:"10px 12px",minWidth:260,maxWidth:360,borderLeft:"4px solid ".concat("success"===e.kind?"#22c55e":"error"===e.kind?"#ef4444":"#3b82f6")},children:[(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:2},children:"success"===e.kind?"\xc9xito":"error"===e.kind?"Error":"Info"}),(0,r.jsx)("div",{className:"muted",children:e.text})]},e.id))})]})}},4282:function(e,t,n){"use strict";n.d(t,{DH:function(){return l},J1:function(){return o},PR:function(){return s},oC:function(){return c}});var r=n(6300).Buffer;let i="taxi_token",a="taxi_user";function o(e,t){localStorage.setItem(i,e),localStorage.setItem(a,JSON.stringify(t))}function s(){let e=localStorage.getItem(a);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function l(){localStorage.removeItem(i),localStorage.removeItem(a)}function c(){let e=localStorage.getItem(i);return e?!function(e){let t=function(e){let t=e.split(".");if(3!==t.length)return null;try{let e=function(e){try{let t=e.length%4==2?"==":e.length%4==3?"=":e.length%4==1?"===":"",n=e.replace(/-/g,"+").replace(/_/g,"/")+t;if("function"==typeof atob)return atob(n);return r.from(n,"base64").toString("binary")}catch(e){return""}}(t[1]);return JSON.parse(e)}catch(e){return null}}(e);return null!=t&&!!t.exp&&Math.floor(Date.now()/1e3)>=t.exp}(e)?e:(l(),null):null}},5204:function(e,t,n){"use strict";n.r(t),t.default="ac2353319419"}},function(e){e.O(0,[846,300,138,971,23,744],function(){return e(e.s=1117)}),_N_E=e.O()}]);