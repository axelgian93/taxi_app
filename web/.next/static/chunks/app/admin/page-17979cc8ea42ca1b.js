(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8039:function(e,t,n){Promise.resolve().then(n.bind(n,306))},306:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(7437),a=n(7138),l=n(2265),i=n(4282);function s(){let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{let e=(0,i.oC)();if(!e)return;let n="http://localhost:8081",[r,a]=await Promise.all([fetch("".concat(n,"/admin/revenue/report?groupBy=city&limit=1&format=json"),{headers:{Authorization:"Bearer ".concat(e)},cache:"no-store"}).then(e=>e.json()).catch(()=>({items:[]})),fetch("".concat(n,"/admin/analytics/trips"),{headers:{Authorization:"Bearer ".concat(e)},cache:"no-store"}).then(e=>e.json()).catch(()=>({total:0,cancelRate:0}))]),l=Array.isArray(r.items)?Number(r.items.reduce((e,t)=>e+Number(t.amountUsd||0),0)):0;t({gmv:l,trips:Number(a.total||0),cancelRate:Number(a.cancelRate||0)})}catch(e){}})()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Panel Admin"}),(0,r.jsxs)("div",{className:"row",style:{gap:12,flexWrap:"wrap"},children:[(0,r.jsx)(c,{title:"GMV (USD)",value:e?"$".concat(e.gmv.toFixed(2)):"—"}),(0,r.jsx)(c,{title:"# Trips",value:e?String(e.trips):"—"}),(0,r.jsx)(c,{title:"Cancel rate",value:e?"".concat((100*e.cancelRate).toFixed(1),"%"):"—"})]}),(0,r.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,r.jsx)("strong",{children:"Accesos r\xe1pidos"}),(0,r.jsxs)("div",{className:"row",style:{gap:10,flexWrap:"wrap",marginTop:8},children:[(0,r.jsx)(a.default,{className:"btn",href:"/admin/demo?city=Guayaquil&olat=-2.170998&olng=-79.922359&dlat=-2.185&dlng=-79.900",children:"Crear viaje demo (Guayaquil)"}),(0,r.jsx)(a.default,{className:"btn",href:"/admin/demo?city=Quito&olat=-0.180653&olng=-78.467834&dlat=-0.190&dlng=-78.450",children:"Crear viaje demo (Quito)"}),(0,r.jsx)(a.default,{className:"btn",href:"/admin/demo?city=Cuenca&olat=-2.900550&olng=-79.004530&dlat=-2.910&dlng=-79.000",children:"Crear viaje demo (Cuenca)"}),(0,r.jsx)(a.default,{className:"btn",href:"/admin/demo",children:"Demo de Viaje"}),(0,r.jsx)(a.default,{className:"btn",href:"/admin/ops",children:"Operaciones"}),(0,r.jsx)(a.default,{className:"btn",href:"/admin/trips",children:"Trips"}),(0,r.jsx)(a.default,{className:"btn",href:"/admin/tariffs",children:"Tarifas"}),(0,r.jsx)(a.default,{className:"btn",href:"/admin/reports",children:"Reportes"}),(0,r.jsx)(a.default,{className:"btn secondary",href:"/admin/readme",children:"Gu\xeda de Demo"})]})]}),(0,r.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,r.jsx)("strong",{children:"Checklist para la demo"}),(0,r.jsxs)("ol",{children:[(0,r.jsx)("li",{children:"Seed: Admin/Rider/Drivers (Start Demo)"}),(0,r.jsx)("li",{children:'Simular un viaje en "Demo de Viaje" (origen/destino, solicitar y avanzar estados)'}),(0,r.jsx)("li",{children:"Ver el trip en Operaciones (SSE en vivo)"}),(0,r.jsx)("li",{children:"Verlo en Trips y Reportes"})]})]})]})}function c(e){let{title:t,value:n}=e;return(0,r.jsxs)("div",{className:"card",style:{padding:"10px 14px",minWidth:160},children:[(0,r.jsx)("div",{className:"muted",style:{marginBottom:4},children:t}),(0,r.jsx)("div",{style:{fontSize:22,fontWeight:600},children:n})]})}},4282:function(e,t,n){"use strict";n.d(t,{DH:function(){return c},J1:function(){return i},PR:function(){return s},oC:function(){return o}});var r=n(6300).Buffer;let a="taxi_token",l="taxi_user";function i(e,t){localStorage.setItem(a,e),localStorage.setItem(l,JSON.stringify(t))}function s(){let e=localStorage.getItem(l);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function c(){localStorage.removeItem(a),localStorage.removeItem(l)}function o(){let e=localStorage.getItem(a);return e?!function(e){let t=function(e){let t=e.split(".");if(3!==t.length)return null;try{let e=function(e){try{let t=e.length%4==2?"==":e.length%4==3?"=":e.length%4==1?"===":"",n=e.replace(/-/g,"+").replace(/_/g,"/")+t;if("function"==typeof atob)return atob(n);return r.from(n,"base64").toString("binary")}catch(e){return""}}(t[1]);return JSON.parse(e)}catch(e){return null}}(e);return null!=t&&!!t.exp&&Math.floor(Date.now()/1e3)>=t.exp}(e)?e:(c(),null):null}}},function(e){e.O(0,[300,138,971,23,744],function(){return e(e.s=8039)}),_N_E=e.O()}]);