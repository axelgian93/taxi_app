(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{1649:function(t,e,n){Promise.resolve().then(n.bind(n,2503))},2503:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=n(7437),a=n(2265),l=n(2800),o=n(4282),u=n(7138);function c(){let[t,e]=(0,a.useState)("rider@taxi.local"),[n,c]=(0,a.useState)("123456"),[i,s]=(0,a.useState)(!1),[f,h]=(0,a.useState)(null);async function d(e){e.preventDefault(),s(!0),h(null);try{let e=await (0,l.j)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:n})});(0,o.J1)(e.token,e.user),location.href="/rider/request"}catch(t){h((null==t?void 0:t.message)||"Error")}finally{s(!1)}}return(0,r.jsxs)("div",{className:"card",style:{maxWidth:420,margin:"40px auto"},children:[(0,r.jsx)("h2",{children:"Rider — Ingresar"}),(0,r.jsxs)("form",{onSubmit:d,className:"row",style:{flexDirection:"column",gap:12},children:[(0,r.jsx)("input",{placeholder:"email",value:t,onChange:t=>e(t.target.value)}),(0,r.jsx)("input",{placeholder:"password",type:"password",value:n,onChange:t=>c(t.target.value)}),f&&(0,r.jsx)("div",{style:{color:"var(--danger)"},children:f}),(0,r.jsx)("button",{className:"btn",disabled:i,children:i?"Ingresando…":"Ingresar"})]}),(0,r.jsxs)("div",{style:{marginTop:8},className:"muted",children:["\xbfNo tienes cuenta? ",(0,r.jsx)(u.default,{href:"/rider/register",children:"Crear cuenta"})]})]})}},2800:function(t,e,n){"use strict";n.d(e,{S:function(){return r},j:function(){return a}});let r="http://localhost:8081";async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=new Headers(e.headers||{});a.set("Content-Type","application/json"),n&&a.set("Authorization","Bearer ".concat(n));let l=await fetch("".concat(r).concat(t),{...e,headers:a,cache:"no-store"});if(!l.ok){let t=await l.text().catch(()=>"");throw Error("API ".concat(l.status,": ").concat(t||l.statusText))}return l.json()}},4282:function(t,e,n){"use strict";n.d(e,{DH:function(){return c},J1:function(){return o},PR:function(){return u},oC:function(){return i}});var r=n(6300).Buffer;let a="taxi_token",l="taxi_user";function o(t,e){localStorage.setItem(a,t),localStorage.setItem(l,JSON.stringify(e))}function u(){let t=localStorage.getItem(l);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}function c(){localStorage.removeItem(a),localStorage.removeItem(l)}function i(){let t=localStorage.getItem(a);return t?!function(t){let e=function(t){let e=t.split(".");if(3!==e.length)return null;try{let t=function(t){try{let e=t.length%4==2?"==":t.length%4==3?"=":t.length%4==1?"===":"",n=t.replace(/-/g,"+").replace(/_/g,"/")+e;if("function"==typeof atob)return atob(n);return r.from(n,"base64").toString("binary")}catch(t){return""}}(e[1]);return JSON.parse(t)}catch(t){return null}}(t);return null!=e&&!!e.exp&&Math.floor(Date.now()/1e3)>=e.exp}(t)?t:(c(),null):null}}},function(t){t.O(0,[300,138,971,23,744],function(){return t(t.s=1649)}),_N_E=t.O()}]);